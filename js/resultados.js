const roles = {
    "Subdirecciones": [
        {name: "Ana Morales", photo: "assets/img/user.png", subjects: ["Administraci√≥n"], evaluations: {
            "Administraci√≥n": {
                "Total de alumnos": 10,
                1: {S√≠: 90, No: 10},
                2: {S√≠: 85, No: 15},
                3: {S√≠: 80, No: 20},
                4: {S√≠: 95, No: 5},
                5: {S√≠: 90, No: 10},
                6: {S√≠: 85, No: 15},
                7: {S√≠: 80, No: 20},
                8: {S√≠: 95, No: 5},
                9: {S√≠: 90, No: 10}
            }
        }, comments: ["Excelente l√≠der.", "Muy organizada."]}
    ],
    "Coordinadores": [
        {name: "Luis P√©rez", photo: "assets/img/user.png", subjects: ["Coordinaci√≥n"], evaluations: {
            "Coordinaci√≥n": {
                "Total de alumnos": 15,
                1: {S√≠: 88, No: 12},
                2: {S√≠: 82, No: 18},
                3: {S√≠: 87, No: 13},
                4: {S√≠: 91, No: 9},
                5: {S√≠: 89, No: 11},
                6: {S√≠: 84, No: 16},
                7: {S√≠: 86, No: 14},
                8: {S√≠: 92, No: 8},
                9: {S√≠: 87, No: 13}
            }
        }, comments: ["Gran coordinador.", "Siempre disponible."]}
    ],
    "Counselors": [
        {name: "Mar√≠a L√≥pez", photo: "assets/img/user.png", subjects: ["Orientaci√≥n"], evaluations: {
            "Orientaci√≥n": {
                "Total de alumnos": 20,
                1: {S√≠: 85, No: 15},
                2: {S√≠: 80, No: 20},
                3: {S√≠: 83, No: 17},
                4: {S√≠: 88, No: 12},
                5: {S√≠: 86, No: 14},
                6: {S√≠: 82, No: 18},
                7: {S√≠: 84, No: 16},
                8: {S√≠: 89, No: 11},
                9: {S√≠: 85, No: 15}
            }
        }, comments: ["Muy emp√°tica.", "Gran apoyo emocional."]}
    ],
    "Tiempo Completo": [
        {name: "Cristina Rodr√≠guez", photo: "assets/img/user.png", subjects: ["Ingl√©s 4¬∞", "Ingl√©s 6¬∞", "√âtica"], evaluations: {
            "Ingl√©s 4¬∞": {
                "Total de alumnos": 6,
                1: {S√≠: 83.33, No: 16.67},
                2: {S√≠: 100, No: 0},
                3: {S√≠: 83.33, No: 16.67},
                4: {S√≠: 100, No: 0},
                5: {S√≠: 100, No: 0},
                6: {S√≠: 83.33, No: 16.67},
                7: {S√≠: 66.67, No: 33.33},
                8: {S√≠: 100, No: 0},
                9: {S√≠: 100, No: 0}
            },
            "Ingl√©s 6¬∞": {
                "Total de alumnos": 18,
                1: {S√≠: 88.89, No: 11.11},
                2: {S√≠: 83.33, No: 16.67},
                3: {S√≠: 83.33, No: 16.67},
                4: {S√≠: 88.89, No: 11.11},
                5: {S√≠: 88.89, No: 11.11},
                6: {S√≠: 77.78, No: 22.22},
                7: {S√≠: 77.78, No: 22.22},
                8: {S√≠: 88.89, No: 11.11},
                9: {S√≠: 77.78, No: 22.22}
            },
            "√âtica": {
                "Total de alumnos": 103,
                1: {S√≠: 91.26, No: 8.74},
                2: {S√≠: 89.32, No: 10.68},
                3: {S√≠: 90.29, No: 9.71},
                4: {S√≠: 87.38, No: 12.62},
                5: {S√≠: 89.32, No: 10.68},
                6: {S√≠: 89.32, No: 10.68},
                7: {S√≠: 89.32, No: 10.68},
                8: {S√≠: 93.20, No: 6.80},
                9: {S√≠: 82.52, No: 17.48}
            }
        }, comments: [
            "Es una excelente maestra, simplemente no hice ‚Äúclick‚Äù con ella porque quiere que todos estemos en silencio y simplemente prefiero 1 mill√≥n de veces a miss Vane <3",
            "Cris mejor√≥ mucho su clase a diferencia del semestre pasado y ya no es tan pesada como antes. Me ayudar√≠a mucho que las actividades en clase no tuvieran calificaci√≥n porque al final para eso es el examen.",
            "La verdad no soy tan af√≠n a la maestra y prefiero estar con Miss Vane ya que crea un ambiente en el cual es m√°s facil y divertido aprender",
            "no tengo ning√∫n problema con la maestra, la cosa es el libro est√° bien curiosito",
            "Es muy graciosa, no es la mejor clase que he tenido pero los temas no dan para mucho",
            "Hacer la clase m√°s did√°ctica",
            "Bien",
            "Respetuosa y exigente",
            "Ngl",
            "La primera vez q vi a la maestra pens√© q era de russia",
            "Mi miss favorita",
            "Amable y entiende a sus alumnos",
            "Muy buena maestra para dar sus clases"
        ]},
        {name: "Joel G√≥mez", photo: "assets/img/user.png", subjects: ["Matem√°ticas 5¬∞", "F√≠sica"], evaluations: {
            "Matem√°ticas 5¬∞": {
                "Total de alumnos": 25,
                1: {S√≠: 92, No: 8},
                2: {S√≠: 88, No: 12},
                3: {S√≠: 90, No: 10},
                4: {S√≠: 94, No: 6},
                5: {S√≠: 91, No: 9},
                6: {S√≠: 87, No: 13},
                7: {S√≠: 89, No: 11},
                8: {S√≠: 93, No: 7},
                9: {S√≠: 90, No: 10}
            },
            "F√≠sica": {
                "Total de alumnos": 20,
                1: {S√≠: 85, No: 15},
                2: {S√≠: 82, No: 18},
                3: {S√≠: 84, No: 16},
                4: {S√≠: 87, No: 13},
                5: {S√≠: 86, No: 14},
                6: {S√≠: 83, No: 17},
                7: {S√≠: 85, No: 15},
                8: {S√≠: 88, No: 12},
                9: {S√≠: 84, No: 16}
            }
        }, comments: ["Muy claro en explicaciones.", "Exigente pero justo."]},
        {name: "Adri√°n Silva", photo: "assets/img/user.png", subjects: ["Historia", "Geograf√≠a"], evaluations: {
            "Historia": {
                "Total de alumnos": 30,
                1: {S√≠: 87, No: 13},
                2: {S√≠: 85, No: 15},
                3: {S√≠: 88, No: 12},
                4: {S√≠: 90, No: 10},
                5: {S√≠: 89, No: 11},
                6: {S√≠: 86, No: 14},
                7: {S√≠: 87, No: 13},
                8: {S√≠: 91, No: 9},
                9: {S√≠: 88, No: 12}
            },
            "Geograf√≠a": {
                "Total de alumnos": 28,
                1: {S√≠: 86, No: 14},
                2: {S√≠: 84, No: 16},
                3: {S√≠: 87, No: 13},
                4: {S√≠: 89, No: 11},
                5: {S√≠: 88, No: 12},
                6: {S√≠: 85, No: 15},
                7: {S√≠: 86, No: 14},
                8: {S√≠: 90, No: 10},
                9: {S√≠: 87, No: 13}
            }
        }, comments: ["Gran conocimiento hist√≥rico.", "Clases interesantes."]},
        {name: "M√≥nica Vel√°zquez", photo: "assets/img/user.png", subjects: ["Qu√≠mica", "Biolog√≠a"], evaluations: {
            "Qu√≠mica": {
                "Total de alumnos": 22,
                1: {S√≠: 89, No: 11},
                2: {S√≠: 87, No: 13},
                3: {S√≠: 90, No: 10},
                4: {S√≠: 92, No: 8},
                5: {S√≠: 91, No: 9},
                6: {S√≠: 88, No: 12},
                7: {S√≠: 89, No: 11},
                8: {S√≠: 93, No: 7},
                9: {S√≠: 90, No: 10}
            },
            "Biolog√≠a": {
                "Total de alumnos": 25,
                1: {S√≠: 88, No: 12},
                2: {S√≠: 86, No: 14},
                3: {S√≠: 89, No: 11},
                4: {S√≠: 91, No: 9},
                5: {S√≠: 90, No: 10},
                6: {S√≠: 87, No: 13},
                7: {S√≠: 88, No: 12},
                8: {S√≠: 92, No: 8},
                9: {S√≠: 89, No: 11}
            }
        }, comments: ["Muy dedicada.", "Explica bien los experimentos."]}
    ],
    "Por Horas": [
        {name: "Carlos S√°nchez", photo: "assets/img/user.png", subjects: ["Artes"], evaluations: {
            "Artes": {
                "Total de alumnos": 15,
                1: {S√≠: 90, No: 10},
                2: {S√≠: 88, No: 12},
                3: {S√≠: 87, No: 13},
                4: {S√≠: 91, No: 9},
                5: {S√≠: 89, No: 11},
                6: {S√≠: 86, No: 14},
                7: {S√≠: 88, No: 12},
                8: {S√≠: 90, No: 10},
                9: {S√≠: 87, No: 13}
            }
        }, comments: ["Creativo y motivador.", "Clases muy din√°micas."]}
    ],
    "Servicios": [
        {name: "Disciplina", photo: "assets/img/disciplina.png", subjects: ["Disciplina"], evaluations: {
            "Disciplina": {
                "Total de alumnos": 246,
                1: {S√≠: 95.93, No: 4.07},
                2: {S√≠: 97.15, No: 2.85},
                3: {S√≠: 92.68, No: 7.32},
                4: {S√≠: 91.87, No: 8.13},
                5: {S√≠: 96.34, No: 3.66},
                6: {S√≠: 91.46, No: 8.54}
            }
        }, comments: [
            "A lo mejor podr√≠an tomar en cuenta ser m√°s flexibles y usar criterio para ciertas cosas de disciplina",
            "La disciplina es buena, no necesita cambios"
        ]},
        {name: "Param√©dico", photo: "assets/img/paramedico.png", subjects: ["Param√©dico"], evaluations: {
            "Param√©dico": {
                "Total de alumnos": 246,
                1: {S√≠: 76.83, No: 23.17},
                2: {S√≠: 73.98, No: 26.02},
                3: {S√≠: 87.80, No: 12.20},
                4: {S√≠: 76.02, No: 23.98}
            }
        }, comments: []},
        {name: "Transporte", photo: "assets/img/transporte.png", subjects: ["Transporte"], evaluations: {
            "Transporte": {
                "Total de alumnos": 52,
                1: {S√≠: 88.46, No: 11.54},
                2: {S√≠: 96.15, No: 3.85},
                3: {S√≠: 88.46, No: 11.54},
                4: {S√≠: 84.62, No: 15.38},
                5: {S√≠: 86.54, No: 13.46}
            }
        }, comments: []},
        {name: "Psicopedag√≥gico", photo: "assets/img/psicopedagogico.png", subjects: ["Psicopedag√≥gico"], evaluations: {
            "Psicopedag√≥gico": {
                "Total de alumnos": 246,
                1: {S√≠: 88.21, No: 11.79},
                2: {S√≠: 81.30, No: 18.70},
                3: {S√≠: 94.31, No: 5.69},
                4: {S√≠: 86.99, No: 13.01},
                5: {S√≠: 86.99, No: 13.01}
            }
        }, comments: []},
        {name: "La Loma", photo: "assets/img/user.png", subjects: ["La Loma"], evaluations: {
            "La Loma": {
                "Total de alumnos": 246,
                1: {S√≠: 91.46, No: 8.54},
                2: {S√≠: 91.46, No: 8.54},
                3: {S√≠: 90.24, No: 9.76},
                4: {S√≠: 90.65, No: 9.35}
            }
        }, comments: [
            "Salimos muy tarde de taekwondo",
            "En tennis",
            "Tenis, los profes no hace nada m√°s que darnos pelotas y una cancha, muy pocas veces nos an dado clase de verdad",
            "En tocho, todo est√° bien, no cambien al coach. Por favor.",
            "En f√∫tbol es mejor usar la cancha de 11 porque somos muchos",
            "En futbol deber√≠amos de usar m√°s la cancha de 11",
            "En futbol hay que usar mas veces las canchas de 11 por que somos muchos",
            "Basket, deber√≠a estar techada",
            "Tenis, no hacen nada",
            "Tochito",
            "en yoga a veces salimos tarde",
            "Tenis porque cuando yo estaba no te ense√±aban nada.",
            "Que agreguen de nuevo crossfit",
            "Ya corran al profe de fut",
            "Tennis",
            "En ritmos",
            "Telas porque el profe es muy creido y a veces grosero",
            "Yoga, m√°s taletes",
            "Yoga m√°s tapetes",
            "Yoga m√°s tapetes",
            "Me parece que todas tienen un buen nivel para entrenar",
            "Box, regr√©senos a Jossie",
            "Yo considero que la distribuci√≥n de disciplinas est√° un poco mal, pues los martes y jueves no hay clases nobles con el cuerpo",
            "Que tenis sea como el a√±o pasado q hab√≠a clases y el profe te ense√±aba",
            "Tenis, se hacen bien mensos toda la clase.",
            "A las que voy todo bien",
            "En tenis no se hace nada",
            "en volley porque es muy din√°mico",
            "F√∫tbol ir en una hora menos soleada",
            "Box",
            "No hay pr√°ctica de tenis para mejorar.",
            "En yoga, porque luego no hay tapetes suficientes",
            "P√°del, por qu√© no est√°n al pendiente de nosotros",
            "En la loma (basquet) no hay suficiente material para todos",
            "Fut porque el coach no muestra inter√©s. Y tocho porque el coach pues simplemente no.",
            "en yoga poner m√°s tapetes",
            "P√°del",
            "Considera que en la loma para p√°del se establezcan horas horarios para nosotros en los que las canchas no se est√©n usando",
            "futbol ya que van muchas personas q no est√°n el la lista y se vuelve aburrido",
            "m√°s entrenamiento en tocho",
            "En tenis, el profe nunca est√° presente",
            "En poner mallas a varias canchas, por el sol",
            "No nos ponemos atenci√≥n en voleibol",
            "F√∫tbol ( despidan a jhonatan)",
            "Dir√≠a que en tocho muchos no hacen nada",
            "tocho, porque hacemos lo mismos todos los d√≠as y a veces no hacemos nada",
            "Box regresando al antiguo profesor SOLO los lunes y mi√©rcoles",
            "Basquetbol, porque no tiene un inter√©s genuino en ello",
            "tochito porque siempre hacemos lo mismo",
            "En fut deber√≠a estar techado",
            "F√∫tbol Jonatan Becerra es mediocre, grosero, naco, y parece que se liga a las ni√±as todo el tiempo en lugar de dar clases. Se pelea con los alumnos por cualquier cosa. Honestamente deber√≠an de despedirlo y tener a alguien mucho m√°s atento de las actitudes de los profes de La Loma, creo que ya es bien sabido lo que pas√≥ con Gabo, y Jona no es la excepci√≥n.",
            "solo estoy en tocho y esta bien",
            "Futbol, a veces son muchos",
            "Pienso que deben poner m√°s d√≠as de Taekwondo, ya que es una disciplina que requiere varios d√≠as de entrenamiento para poder ver avances. El coach es muy bueno y pone actividades de acuerdo al avance de cada alumno, sin embargo, requiere m√°s d√≠as de clase para poder avanzar.",
            "danza aerea, es aburrido",
            "Tennis",
            "en ritmos porque me gustar√≠a que pusieran nuevas coreograf√≠as y canciones ya que siempre son las mismas",
            "En tennis no se hace nada",
            "P√°del y tenis como tal lo hacen nda m√°s que pelotear",
            "En p√°del, porque los profesores nunca dan clases, se van a la cafeter√≠a de la loma, no hay toman lista, a veces ni est√°n, su actitud es nefasta",
            "En tenis m√°s coordinaci√≥n y atenci√≥n",
            "En p√°del que nos den una buena clase",
            "padel, los profesores no saben dar clase, y ni siquiera te dirigen la palabra, como si tuvieran pena de hablarnos",
            "Basquetball, no le dan la importancia a un deporte tan importante",
            "P√°del porque los profes echan flojera y siempre hacemos lo mismo cuando si hay clase y es bien poquito y adem√°s no corrigen la t√©cnica para ense√±arnos como se hace",
            "Tenis",
            "F√∫tbol, el entrenador no muestra ning√∫n tipo de inter√©s por la clase o sus alumnos, ha llegado a faltarle al respeto a mis compa√±eros y ha dejado claro que a √©l no le interesa que el taller siga llegando a decir ‚Äúpor mi que cierren el taller‚Äù",
            "Futbol porque el profesor no muestra ning√∫n tipo de inter√©s y ah llegado a soltar frases como por m√≠ que cierren el taller a m√≠ no me importa",
            "üéæ tenis, hacer mas actividades",
            "El calor de la cancha de caucho",
            "Ritmos latinos, qu√≠tenlo y pongan telas otra vez",
            "Futbol Soccer, no muestra interes y es muy repetitivo todo",
            "dar tiempo para que los de nataci√≥n puedan regresar",
            "las clases de box acaban muy tarde y me rega√±an por llegar tarde, nataci√≥n muy grosero el personal siempre hablando con tonos malhumorados, el de p√°del no presta m√°s de una pelota o de plano ninguna,",
            "Nataci√≥n dar m√°s tiempo para cambiarse y en tenis asegurarse de pasar bien asistencia",
            "Deber√≠an agregar m√°s o tetes en la de basketball",
            "Tenis mejores activades",
            "Que si den clases en tenis, que no dan claes",
            "Tenis, la clase es inexistente"
        ]},
        {name: "Cafeter√≠a", photo: "assets/img/cafeteria.jpg", subjects: ["Cafeter√≠a"], evaluations: {
            "Cafeter√≠a": {
                "Total de alumnos": 246,
                1: {S√≠: 65.85, No: 34.15},
                2: {S√≠: 86.18, No: 13.82},
                3: {S√≠: 54.07, No: 45.93},
                4: {S√≠: 69.51, No: 30.49}
            }
        }, comments: [
            "que quitaron la tienda",
            "Los boneless estan asquerosos y duros",
            "si, mi comida ha estado mala",
            "Me he encontrado pelos en la comida, los precios son muy altos, unas veces la comida est√° fr√≠a, se tardan mucho en preparar la comida.",
            "Necesitan abrir m√°s puntos de venta, dividir los clientes, aunque vendan lo mismo, o diferentes cosas en cada uno. Las filas actualmente son interminables.",
            "Las aguas est√°n horribles pero las embotelladas",
            "deberian agregar m√°s cositas al men√∫",
            "Las filas que hay para comprar",
            "Solo que siempre hay mucha fila y tardas como 20 minutos del recreo esperando",
            "Cosas m√°s saludable y baratas",
            "los boneless de la cafe duros",
            "Todo bien",
            "ver√≠an vender m√°s cosas y de mejor calidad",
            "Mejorar la calidad de servicios",
            "la comida tiene mucha grasa",
            "Los boneless est√°n bien feos y duros.",
            "Los precios son altos y est√° muy grasosa la comida",
            "Todo bien",
            "Que una vez me cobraron algo que yo no hab√≠a comprado",
            "si, una vez me dieron mi comida un poco cruda",
            "Quitaron la coca cola y refrescos",
            "La fila",
            "No,",
            "no compro mucho, pero me han dicho que falta higiene.",
            "Quitaron cosas del semestre pasado como las hamburguesas o gusanos al pastor que eran lo mejor.",
            "es muy cara y no tienen tanta variedad",
            "se hace una fila enorme porque no hay un control, la gente se mete y por lo tanto se hace mucho tiempo",
            "Si ya que he dejado comida pagada y no aparece y no me quer√≠an reembolsar",
            "Siento que no hay tan buena variedad",
            "una vez aparte algo para la salida, lo pagu√© y cuando llegu√© para agarrar lo que ped√≠ ya mi estaba y no me lo repusieron",
            "muy mala organizaci√≥n y muy grasosa la comida, y poca variedad",
            "se tardan mucho, la fila de las m√°quinas de sopas es muy tardado y nunca sirven las 2",
            "deber√≠an abrir m√°s food trucks",
            "la comida cae mal",
            "me parece que el men√∫ a sido muy malo desde que quitaron lo dulce porfa regr√©senlo",
            "Mis alimentos tienen much√≠sima grasa que hasta est√° goteando y una vez me sali√≥ un pelo en mi comida",
            "x",
            "una vez me sali√≥ un cabello en mi sushi, y a una amiga m√≠a le pas√≥ que su pan ten√≠a hongo",
            "El servicio es muy bueno y las trabajadoras son personas muy lindas y agradables, espero sigan as√≠ pero mejoren su equipo y le agregen variedad al men√∫, adem√°s deber√≠an de pegar un menu en la pared de la cafeter√≠a.",
            "cuando he comido sushi ha estado en mal estado, he encontrado pelos.",
            "en la cafeter√≠a a mi hermana le entregaron un baguette el cual tra√≠a un hongo en el pan.",
            "desde que dejaron a una sola organizaci√≥n a cargo de la cafeter√≠a la calidad ha disminuido much√≠simo quitando ingredientes o de mala calidad como el pollo muy duro o arrachera fea y los precios han aumentado",
            "deberian haber mas variedad de cosas saludables",
            "Muy lento a veces",
            "si me enferm√© del est√≥mago por alg√∫n alimento echado a perder y me tuvieron que llevar al doctor",
            "b√°jenle el precio a sus baguettes no puede ser que pague casi 100 pesos por un baguette",
            "b√°jenle el precio a las cosas, luego no me da",
            "No he tenido pero me gustar√≠a que a√±adieran m√°s cosas saludables para desayuno y para snacks.",
            "me gustar√≠a que vuelvan a vender papas, galletas, bebidas, dulces, etc",
            "Si quiero mas variedad de comida",
            "El aumento de los precios",
            "Est√° muy cara y luego tardan mucho y se entrega fria",
            "Regresen el az√∫car, Claudia ni nos topa",
            "Se equivocan con los pedidos",
            "Si, sin el uso de celular y reducir la cantidad de alimentos que se venden, las filas son muy largas y tardan mucho, quitando m√°s del 70% de tu horario de comida para esperar en la fila y se acaba la comida",
            "Los precios son altos y necesitan m√°s variedad",
            "Regresen el pay de queso nunca lo logre probar",
            "que al afogato le pongan helado de vainilla por qu√© la fresa pues no le da buen sabor",
            "muchas veces he encontrado un cabello dentro de mi comida, especialmente en el sushi",
            "En una ocasi√≥n compr√© un baguette y el pan ten√≠a hongos. Y otro d√≠a me sali√≥ un cabello en un sushi",
            "Que hayan quitado las frituras",
            "una carne un poquillo cruda",
            "tal vez que la gente se mete pero fuera de eso el servicio y la atencion es muy buena",
            "hay pocas opciones de comida"
        ]},
        {name: "Limpieza", photo: "assets/img/limpieza.png", subjects: ["Limpieza"], evaluations: {
            "Limpieza": {
                "Total de alumnos": 246,
                1: {S√≠: 95.93, No: 4.07},
                2: {S√≠: 96.75, No: 3.25},
                3: {S√≠: 95.93, No: 4.07}
            }
        }, comments: [
            "Otro comentario que no es de disciplina pero en el √°rea de limpieza no hay espacio para sugerencias, es que hay una se√±ora en espec√≠fico pelirroja que luego se comporta de forma grosera, de repente habla brusco y hace caras."
        ]},
        {name: "Talleres Extra Clase", photo: "assets/img/taller.png", subjects: ["Talleres Extra Clase"], evaluations: {
            "Talleres Extra Clase": {
                "Total de alumnos": 41,
                1: {S√≠: 97.56, No: 2.44},
                2: {S√≠: 100.00, No: 0.00},
                3: {S√≠: 100.00, No: 0.00},
                4: {S√≠: 100.00, No: 0.00},
                5: {S√≠: 95.12, No: 4.88},
                6: {S√≠: 95.12, No: 4.88}
            }
        }, comments: []},
        {name: "Ligas Deportivas", photo: "assets/img/ligas.png", subjects: ["Ligas Deportivas"], evaluations: {
            "Ligas Deportivas": {
                "Total de alumnos": 55,
                1: {S√≠: 94.55, No: 5.45},
                2: {S√≠: 87.27, No: 12.73},
                3: {S√≠: 83.64, No: 16.36},
                4: {S√≠: 92.73, No: 7.27},
                5: {S√≠: 96.36, No: 3.64},
                6: {S√≠: 87.27, No: 12.73}
            }
        }, comments: []}
    ]
};

let selectedRole = null;
let selectedPerson = null;

// Function to populate role list
function populateRoleList() {
    const roleList = document.getElementById('role-list');
    roleList.innerHTML = '';
    Object.keys(roles).forEach(role => {
        if (role === "Servicios") {
            const roleLabel = document.createElement('label');
            roleLabel.className = 'role';
            roleLabel.onclick = () => toggleSubRoles('servicios-sub-roles');
            roleLabel.innerHTML = `${role} <i class="fas fa-chevron-down"></i>`;
            roleList.appendChild(roleLabel);
            const subRolesDiv = document.createElement('div');
            subRolesDiv.className = 'sub-roles';
            subRolesDiv.id = 'servicios-sub-roles';
            roles[role].forEach(service => {
                const subRoleLabel = document.createElement('label');
                subRoleLabel.className = 'sub-role';
                subRoleLabel.onclick = () => showRoleInfo('Servicios', service.name);
                subRoleLabel.innerText = service.name;
                subRolesDiv.appendChild(subRoleLabel);
            });
            roleList.appendChild(subRolesDiv);
        } else {
            const roleLabel = document.createElement('label');
            roleLabel.className = 'role';
            roleLabel.onclick = () => showRoleInfo(role);
            roleLabel.innerText = role;
            roleList.appendChild(roleLabel);
        }
    });
}

// Function to toggle sub-roles
function toggleSubRoles(id) {
    const subRoles = document.getElementById(id);
    const icon = subRoles.previousElementSibling.querySelector('i');
    subRoles.classList.toggle('active');
    icon.classList.toggle('rotate');
}

// Function to show role information
function showRoleInfo(role, subRole = null) {
    const roleInfo = document.getElementById('roleInfo');
    roleInfo.innerHTML = '';
    selectedRole = role;

    let people = roles[role];
    if (subRole) {
        people = roles[role].filter(person => person.name === subRole);
    }

    if (people.length > 0) {
        people.forEach(person => {
            const card = document.createElement('div');
            card.className = 'card';
            const showSubjectButton = role !== 'Servicios';
            card.innerHTML = `
                <img src="${person.photo}" alt="${person.name}">
                <h3>${person.name}</h3>
                <div class="btn-container">
                    <button class="btn btn-general" onclick="showGeneralResults('${role}', '${person.name}')">Resultados Generales</button>
                    ${showSubjectButton ? `<button class="btn btn-materia" onclick="showSubjectResults('${role}', '${person.name}')">Resultados por Materia</button>` : ''}
                    <button class="btn btn-comentarios" onclick="showComments('${role}', '${person.name}')">Comentarios</button>
                </div>
            `;
            roleInfo.appendChild(card);
        });
        document.getElementById('noSelectionMessage').style.display = 'none';
        roleInfo.classList.add('active');
    } else {
        document.getElementById('noSelectionMessage').style.display = 'block';
        roleInfo.classList.remove('active');
    }
}

// Function to show general results
function showGeneralResults(role, name) {
    const person = roles[role].find(p => p.name === name);
    selectedPerson = person;

    let averages = { S√≠: 0, No: 0 };
    person.subjects.forEach(subject => {
        let avgS√≠ = 0, avgNo = 0;
        const evalLength = Object.keys(person.evaluations[subject]).length - 1;
        for (let i = 1; i <= evalLength; i++) {
            avgS√≠ += person.evaluations[subject][i].S√≠;
            avgNo += person.evaluations[subject][i].No;
        }
        avgS√≠ /= evalLength;
        avgNo /= evalLength;
        averages.S√≠ += avgS√≠;
        averages.No += avgNo;
    });
    averages.S√≠ /= person.subjects.length;
    averages.No /= person.subjects.length;

    let html = `
        <h2>PREPA BALMORAL ESCOC√âS</h2>
        <h3>CONCENTRADO EVALUACI√ìN ${role === 'Servicios' ? 'DE SERVICIOS' : 'DOCENTE'}</h3>
        <h4>${role === 'Servicios' ? 'SERVICIO' : 'NOMBRE DEL DOCENTE'}: ${name}</h4>
        <table>
            <thead>
                <tr>
                    <th rowspan="2">No.</th>
                    <th rowspan="2">CRITERIO DE EVALUACI√ìN</th>
                    ${person.subjects.map(subject => `<th colspan="2">${subject}</th>`).join('')}
                    <th rowspan="2">PROMEDIO</th>
                </tr>
                <tr>
                    ${person.subjects.map(subject => `<th>% de S√≠</th><th>% de No</th>`).join('')}
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td></td>
                    <td>Total de alumnos</td>
                    ${person.subjects.map(subject => `<td colspan="2">${person.evaluations[subject]["Total de alumnos"]}</td>`).join('')}
                    <td></td>
                </tr>
    `;

    const criteriaMap = {
        "default": [
            "El docente dio a conocer los criterios de evaluaci√≥n de la materia",
            "¬øEl docente explica los temas de manera clara y comprensible?",
            "¬øEl docente fomenta la participaci√≥n de los alumnos y responde a sus preguntas de manera adecuada?",
            "El docente se comunica de manera respetuosa y clara.",
            "¬øEl docente muestra dominio del tema que ense√±a?",
            "¬øEl docente utiliza recursos o estrategias que facilitan el aprendizaje (por ejemplo, presentaciones, ejercicios pr√°cticos, ejemplos, etc.)?",
            "¬øEl docente crea un ambiente de respeto y motivaci√≥n en clase?",
            "El docente eval√∫a de acuerdo con los contenidos vistos en clase y criterios establecidos",
            "El docente da retroalimentaci√≥n oportuna para garantizar el aprendizaje"
        ],
        "Disciplina": [
            "¬øEL ENCARGADO DE DISCIPLINA APLICA EL REGLAMENTO DE LOS BALMOREES EN TODO MOMENTO?",
            "¬øEL ENCARGADO DE DISCIPLINA TRATA CON RESPETO A TODOS LOS ALUMNOS?",
            "¬øEL ENCARGADO DE DISCIPLINA TIENE UN BUEN CONTROL ESTUDIANTIL DE TAL MANERA QUE GENERA UN AMBIENTE DE SEGURIDAD Y RESPETO?",
            "¬øEL ENCARGADO DE DISCIPLINA APLICA EFICIENTEMENTE LA METODOLOG√çA DE WARNING Y REC√ìRD?",
            "¬øEL ENCARGADO DE DISCIPLINA REALIZA SEGUIMIENTOS, RONDINES Y GUARDIAS EFICIENTES DURANTE LA JORNADA?",
            "¬øESTOY SATISFECHO POR EL TRABAJO, GESTI√ìN Y MANEJO DEL √ÅREA DE DISCIPLINA?"
        ],
        "Param√©dico": [
            "¬øEL PARAMEDICO SE ENCUENTRA DISPONIBLE PARA ATENDER CUALQUIER EVENTUALIDAD QUE SE PRESENTE?",
            "¬øLA ATENCI√ìN Y RESPUESTA DEL SERVICIO M√âDICO ES R√ÅPIDA Y EFECTIVA EN SITUACIONES DE EMERGENCIA?",
            "¬øEL PARAMEDICO TRATA CON RESPETO A TODOS LOS ALUMNOS?",
            "¬øESTOY SATISFECHO CON ATENCI√ìN Y CANALIZACIONES REALIZADAS POR EL PARAMEDICO?"
        ],
        "Transporte": [
            "¬øEL SERVICIO DE TRANSPORTE ES PUNTUAL Y RESPETA LOS TIEMPOS PREVISTOS?",
            "¬øEL PERSONAL MANTIENE UNA ACTITUD RESPETUOSA Y ADECUADA DURANTE LOS TRASLADOS?",
            "¬øLAS UNIDADES EST√ÅN EN CONDICIONES ADECUADAS Y LIMPIAS?",
            "¬øEL SERVICIO DE COMUNICACI√ìN CON LOS ALUMNOS Y PADRES DE FAMILIA ES ADECUADO?",
            "¬øESTOY SATISFECHO CON EL SERVICIO DE TRANSPORTE OFRECIDO?"
        ],
        "Psicopedag√≥gico": [
            "¬øEL PSIC√ìLOGO ESCOLAR MUESTRA INTER√âS GENUINO EN TUS INQUIETUDES Y TE BRINDA ATENCI√ìN PROFESIONAL?",
            "¬øES ACCESIBLE, R√ÅPIDO Y EFICIENTE EL PROCESO PARA CONSEGUIR UNA CITA Y ATENCI√ìN POR PARTDE DEL PSIC√ìLOGO ESCOLAR?",
            "¬øEL PSIC√ìLOGO TE TRATA CON RESPETO?",
            "¬øLAS SESIONES CON EL PSIC√ìLOGO HAN CONTRIBUIDO EFECTIVAMENTE A TU BIENESTAR Y DESARROLLO PERSONAL?",
            "¬øESTOY SATISFECHO POR EL TRABAJO, GESTI√ìN Y MANEJO DEL √ÅREA DE PSICOLOG√çA?"
        ],
        "La Loma": [
            "¬øLAS CLASES DEPORTIVAS INICIAN Y FINALIZAN DE MANERA PUNTUAL?",
            "¬øLOS ENTRENADORES MUESTRAN DOMINIO Y DISCIPLINA DEPORTIVA?",
            "¬øLAS CLASES PROMUEVEN EL INTER√âS EN EL DEPORTE?",
            "ESTOY SATISFECHO POR EL TRABAJO, GESTI√ìN Y MANEJO DEL √ÅREA DE DISCIPLINA"
        ],
        "Cafeter√≠a": [
            "¬øEL SABOR Y LA VARIEDAD DE LOS ALIMENTOS QUE OFRECEN SON DE MI AGRADO?",
            "¬øLA LIMPIEZA EN LOS PRODUCTOS QUE OFRECEN ES LA ESPERADA?",
            "¬øLOS COSTOS EN RELACI√ìN A LA CALIDAD DE LOS ALIMIENTOS SON LOS ADECUADOS?",
            "¬øESTOY SATISFECHO CON EL SERVICIO OFRECIDO POR LA CAFETER√çA?"
        ],
        "Limpieza": [
            "¬øLOS ESPACIOS CR√çTICOS (BA√ëOS, SALONES, OFICINAS, AULA MAGNA, ETC.) SE MANTIENEN LIMPIOS DURANTE LA JORNADA?",
            "¬øEL PERSONAL DE LIMPIEZA TRATA CON RESPETO A TODOS LOS ALUMNOS?",
            "¬øESTOY SATISFECHO CON EL SERVICIO DE LIMPIEZA?"
        ],
        "Talleres Extra Clase": [
            "¬øEL CONTENIDO Y PREPARACI√ìN DE LOS TALLERES ES EL ADECUADO?",
            "¬øEL TITULAR DEL TALLER TRATA CON RESPETO A TODOS LOS ALUMNOS?",
            "¬øEL TITULAR DEL TALLER APLICA EL REGLAMENTO DE LOS BALMORRES?",
            "¬øEL TITULAR DEL TALLER TIENE UN BUEN CONTROL DEL GRUPO DE TAL MANERA QUE GENERA UN AMBIENTE DE SEGURIDAD Y RESPETO?",
            "¬øMIS CONOCIMIENTOS Y HABILIDADES HAN MEJORADO A PARTIR DE QUE ASISTO AL TALLER?",
            "¬øESTOY SATISFECHO CON EL DESEMPE√ëO, GU√çA, ACOMPA√ëAMIENTO Y PREPARACI√ìN RECIBIDA POR PARTE DEL TITULAR DEL TALLER?"
        ],
        "Ligas Deportivas": [
            "¬øEL COACH RESPONSABLE DE LA LIGA APLICA EL REGLAMENTO DE LOS BALMOREES?",
            "¬øEL COACH RESPONSABLE DE LA LIGA TRATA CON RESPETO A TODOS LOS ALUMNOS?",
            "¬øEL COACH RESPONSABLE DE LA LIGA TIENE UN BUEN CONTROL DEL EQUIPO DE TAL MANERA QUE GENERA UN AMBIENTE DE SEGURIDAD Y RESPETO?",
            "¬øEL COACH RESPONSABLE DE LA LIGA MUESTRA UN INTER√âS POR EL COMPORTAMIENTO DEL EQUIPO?",
            "¬øEL COACH RESPONSABLE DE LA LIGA DEMUESTRA CONOCIMIENTO T√âCNICO Y CAPACIDAD PARA DESARROLLAR LAS HABILIDADES DE LOS INTEGRANTES DE LA LIGA?",
            "¬øESTOY SATISFECHO POR EL TRABAJO, GESTI√ìN Y MANEJO DE LAS LIGAS REPRESENTATIVAS?"
        ]
    };

    const subject = person.subjects[0];
    const criteria = criteriaMap[subject] || criteriaMap["default"];
    const evalLength = Object.keys(person.evaluations[subject]).length - 1;

    for (let i = 1; i <= evalLength; i++) {
        let rowAverageS√≠ = 0;
        let rowAverageNo = 0;
        html += `
            <tr>
                <td>${i}</td>
                <td>${criteria[i - 1]}</td>
        `;
        person.subjects.forEach(subject => {
            const evalData = person.evaluations[subject][i];
            html += `<td>${evalData.S√≠.toFixed(2)}%</td><td>${evalData.No.toFixed(2)}%</td>`;
            rowAverageS√≠ += evalData.S√≠;
            rowAverageNo += evalData.No;
        });
        rowAverageS√≠ /= person.subjects.length;
        rowAverageNo /= person.subjects.length;
        html += `<td>${rowAverageS√≠.toFixed(2)}%</td></tr>`;
    }

    html += `
                <tr>
                    <td colspan="2">PROMEDIO GENERAL DE SATISFACCI√ìN</td>
                    ${person.subjects.map(subject => {
                        let avgS√≠ = 0, avgNo = 0;
                        const evalLength = Object.keys(person.evaluations[subject]).length - 1;
                        for (let i = 1; i <= evalLength; i++) {
                            avgS√≠ += person.evaluations[subject][i].S√≠;
                            avgNo += person.evaluations[subject][i].No;
                        }
                        avgS√≠ /= evalLength;
                        avgNo /= evalLength;
                        return `<td>${avgS√≠.toFixed(2)}%</td><td>${avgNo.toFixed(2)}%</td>`;
                    }).join('')}
                    <td>${averages.S√≠.toFixed(2)}%</td>
                </tr>
            </tbody>
        </table>
    `;

    document.getElementById('generalResultsContent').innerHTML = html;
    const generalResultsModal = new bootstrap.Modal(document.getElementById('generalResultsModal'));
    generalResultsModal.show();
}

// Function to show subject results
function showSubjectResults(role, name) {
    const person = roles[role].find(p => p.name === name);
    selectedPerson = person;
    const select = document.getElementById('subjectSelect');
    select.innerHTML = '<option value="">Selecciona una materia</option>';
    person.subjects.forEach(subject => {
        const option = document.createElement('option');
        option.value = subject;
        option.textContent = subject;
        select.appendChild(option);
    });
    const subjectModal = new bootstrap.Modal(document.getElementById('subjectModal'));
    subjectModal.show();
    document.getElementById('subjectTable').innerHTML = '';
}

// Handle subject selection
document.getElementById('subjectSelect').addEventListener('change', function() {
    const subject = this.value;
    if (subject) {
        const person = roles[selectedRole].find(p => p.name === selectedPerson.name);
        const evalData = person.evaluations[subject];
        let html = `
            <h4>Resultados para ${subject}</h4>
            <table>
                <thead>
                    <tr>
                        <th>No.</th>
                        <th>CRITERIO DE EVALUACI√ìN</th>
                        <th>% de S√≠</th>
                        <th>% de No</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td></td>
                        <td>Total de alumnos</td>
                        <td colspan="2">${evalData["Total de alumnos"]}</td>
                    </tr>
        `;

        const criteria = [
            "El docente dio a conocer los criterios de evaluaci√≥n de la materia",
            "¬øEl docente explica los temas de manera clara y comprensible?",
            "¬øEl docente fomenta la participaci√≥n de los alumnos y responde a sus preguntas de manera adecuada?",
            "El docente se comunica de manera respetuosa y clara.",
            "¬øEl docente muestra dominio del tema que ense√±a?",
            "¬øEl docente utiliza recursos o estrategias que facilitan el aprendizaje (por ejemplo, presentaciones, ejercicios pr√°cticos, ejemplos, etc.)?",
            "¬øEl docente crea un ambiente de respeto y motivaci√≥n en clase?",
            "El docente eval√∫a de acuerdo con los contenidos vistos en clase y criterios establecidos",
            "El docente da retroalimentaci√≥n oportuna para garantizar el aprendizaje"
        ];

        const evalLength = Object.keys(evalData).length - 1;
        for (let i = 1; i <= evalLength; i++) {
            const data = evalData[i];
            html += `
                <tr>
                    <td>${i}</td>
                    <td>${criteria[i - 1]}</td>
                    <td>${data.S√≠.toFixed(2)}%</td>
                    <td>${data.No.toFixed(2)}%</td>
                </tr>
            `;
        }

        let avgS√≠ = 0, avgNo = 0;
        for (let i = 1; i <= evalLength; i++) {
            avgS√≠ += evalData[i].S√≠;
            avgNo += evalData[i].No;
        }
        avgS√≠ /= evalLength;
        avgNo /= evalLength;
        html += `
                    <tr>
                        <td colspan="2">PROMEDIO GENERAL DE SATISFACCI√ìN</td>
                        <td>${avgS√≠.toFixed(2)}%</td>
                        <td>${avgNo.toFixed(2)}%</td>
                    </tr>
                </tbody>
            </table>
        `;
        document.getElementById('subjectTable').innerHTML = html;
    }
});

// Function to show comments
function showComments(role, name) {
    const person = roles[role].find(p => p.name === name);
    selectedPerson = person;
    let html = `
        <h2>Comentarios para ${name}</h2>
        <div class="comments-box">
            ${person.comments.length > 0 ? person.comments.map(comment => `<p>${comment}</p>`).join('') : '<p>No hay comentarios disponibles.</p>'}
        </div>
    `;
    document.getElementById('commentsContent').innerHTML = html;
    const commentsModal = new bootstrap.Modal(document.getElementById('commentsModal'));
    commentsModal.show();
}

// Function to load header
function loadHeader() {
    fetch('header.html')
        .then(response => response.text())
        .then(data => {
            document.getElementById('header').innerHTML = data;
        })
        .catch(error => console.error('Error loading header:', error));
}

// Initialize page
document.addEventListener('DOMContentLoaded', () => {
    loadHeader();
    populateRoleList();
    document.getElementById('noSelectionMessage').style.display = 'block';
    document.getElementById('roleInfo').classList.remove('active');
});