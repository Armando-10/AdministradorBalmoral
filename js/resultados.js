const roles = {
    "Subdirecciones": [
        {name: "Ana Morales", photo: "assets/img/user.png", subjects: ["Administración"], evaluations: {
            "Administración": {
                "Total de alumnos": 10,
                1: {Sí: 90, No: 10},
                2: {Sí: 85, No: 15},
                3: {Sí: 80, No: 20},
                4: {Sí: 95, No: 5},
                5: {Sí: 90, No: 10},
                6: {Sí: 85, No: 15},
                7: {Sí: 80, No: 20},
                8: {Sí: 95, No: 5},
                9: {Sí: 90, No: 10}
            }
        }, comments: ["Excelente líder.", "Muy organizada."]}
    ],
    "Coordinadores": [
        {name: "Luis Pérez", photo: "assets/img/user.png", subjects: ["Coordinación"], evaluations: {
            "Coordinación": {
                "Total de alumnos": 15,
                1: {Sí: 88, No: 12},
                2: {Sí: 82, No: 18},
                3: {Sí: 87, No: 13},
                4: {Sí: 91, No: 9},
                5: {Sí: 89, No: 11},
                6: {Sí: 84, No: 16},
                7: {Sí: 86, No: 14},
                8: {Sí: 92, No: 8},
                9: {Sí: 87, No: 13}
            }
        }, comments: ["Gran coordinador.", "Siempre disponible."]}
    ],
    "Counselors": [
        {name: "María López", photo: "assets/img/user.png", subjects: ["Orientación"], evaluations: {
            "Orientación": {
                "Total de alumnos": 20,
                1: {Sí: 85, No: 15},
                2: {Sí: 80, No: 20},
                3: {Sí: 83, No: 17},
                4: {Sí: 88, No: 12},
                5: {Sí: 86, No: 14},
                6: {Sí: 82, No: 18},
                7: {Sí: 84, No: 16},
                8: {Sí: 89, No: 11},
                9: {Sí: 85, No: 15}
            }
        }, comments: ["Muy empática.", "Gran apoyo emocional."]}
    ],
    "Tiempo Completo": [
        {name: "Cristina Rodríguez", photo: "assets/img/user.png", subjects: ["Inglés 4°", "Inglés 6°", "Ética"], evaluations: {
            "Inglés 4°": {
                "Total de alumnos": 6,
                1: {Sí: 83.33, No: 16.67},
                2: {Sí: 100, No: 0},
                3: {Sí: 83.33, No: 16.67},
                4: {Sí: 100, No: 0},
                5: {Sí: 100, No: 0},
                6: {Sí: 83.33, No: 16.67},
                7: {Sí: 66.67, No: 33.33},
                8: {Sí: 100, No: 0},
                9: {Sí: 100, No: 0}
            },
            "Inglés 6°": {
                "Total de alumnos": 18,
                1: {Sí: 88.89, No: 11.11},
                2: {Sí: 83.33, No: 16.67},
                3: {Sí: 83.33, No: 16.67},
                4: {Sí: 88.89, No: 11.11},
                5: {Sí: 88.89, No: 11.11},
                6: {Sí: 77.78, No: 22.22},
                7: {Sí: 77.78, No: 22.22},
                8: {Sí: 88.89, No: 11.11},
                9: {Sí: 77.78, No: 22.22}
            },
            "Ética": {
                "Total de alumnos": 103,
                1: {Sí: 91.26, No: 8.74},
                2: {Sí: 89.32, No: 10.68},
                3: {Sí: 90.29, No: 9.71},
                4: {Sí: 87.38, No: 12.62},
                5: {Sí: 89.32, No: 10.68},
                6: {Sí: 89.32, No: 10.68},
                7: {Sí: 89.32, No: 10.68},
                8: {Sí: 93.20, No: 6.80},
                9: {Sí: 82.52, No: 17.48}
            }
        }, comments: [
            "Es una excelente maestra, simplemente no hice “click” con ella porque quiere que todos estemos en silencio y simplemente prefiero 1 millón de veces a miss Vane <3",
            "Cris mejoró mucho su clase a diferencia del semestre pasado y ya no es tan pesada como antes. Me ayudaría mucho que las actividades en clase no tuvieran calificación porque al final para eso es el examen.",
            "La verdad no soy tan afín a la maestra y prefiero estar con Miss Vane ya que crea un ambiente en el cual es más facil y divertido aprender",
            "no tengo ningún problema con la maestra, la cosa es el libro está bien curiosito",
            "Es muy graciosa, no es la mejor clase que he tenido pero los temas no dan para mucho",
            "Hacer la clase más didáctica",
            "Bien",
            "Respetuosa y exigente",
            "Ngl",
            "La primera vez q vi a la maestra pensé q era de russia",
            "Mi miss favorita",
            "Amable y entiende a sus alumnos",
            "Muy buena maestra para dar sus clases"
        ]},
        {name: "Joel Gómez", photo: "assets/img/user.png", subjects: ["Matemáticas 5°", "Física"], evaluations: {
            "Matemáticas 5°": {
                "Total de alumnos": 25,
                1: {Sí: 92, No: 8},
                2: {Sí: 88, No: 12},
                3: {Sí: 90, No: 10},
                4: {Sí: 94, No: 6},
                5: {Sí: 91, No: 9},
                6: {Sí: 87, No: 13},
                7: {Sí: 89, No: 11},
                8: {Sí: 93, No: 7},
                9: {Sí: 90, No: 10}
            },
            "Física": {
                "Total de alumnos": 20,
                1: {Sí: 85, No: 15},
                2: {Sí: 82, No: 18},
                3: {Sí: 84, No: 16},
                4: {Sí: 87, No: 13},
                5: {Sí: 86, No: 14},
                6: {Sí: 83, No: 17},
                7: {Sí: 85, No: 15},
                8: {Sí: 88, No: 12},
                9: {Sí: 84, No: 16}
            }
        }, comments: ["Muy claro en explicaciones.", "Exigente pero justo."]},
        {name: "Adrián Silva", photo: "assets/img/user.png", subjects: ["Historia", "Geografía"], evaluations: {
            "Historia": {
                "Total de alumnos": 30,
                1: {Sí: 87, No: 13},
                2: {Sí: 85, No: 15},
                3: {Sí: 88, No: 12},
                4: {Sí: 90, No: 10},
                5: {Sí: 89, No: 11},
                6: {Sí: 86, No: 14},
                7: {Sí: 87, No: 13},
                8: {Sí: 91, No: 9},
                9: {Sí: 88, No: 12}
            },
            "Geografía": {
                "Total de alumnos": 28,
                1: {Sí: 86, No: 14},
                2: {Sí: 84, No: 16},
                3: {Sí: 87, No: 13},
                4: {Sí: 89, No: 11},
                5: {Sí: 88, No: 12},
                6: {Sí: 85, No: 15},
                7: {Sí: 86, No: 14},
                8: {Sí: 90, No: 10},
                9: {Sí: 87, No: 13}
            }
        }, comments: ["Gran conocimiento histórico.", "Clases interesantes."]},
        {name: "Mónica Velázquez", photo: "assets/img/user.png", subjects: ["Química", "Biología"], evaluations: {
            "Química": {
                "Total de alumnos": 22,
                1: {Sí: 89, No: 11},
                2: {Sí: 87, No: 13},
                3: {Sí: 90, No: 10},
                4: {Sí: 92, No: 8},
                5: {Sí: 91, No: 9},
                6: {Sí: 88, No: 12},
                7: {Sí: 89, No: 11},
                8: {Sí: 93, No: 7},
                9: {Sí: 90, No: 10}
            },
            "Biología": {
                "Total de alumnos": 25,
                1: {Sí: 88, No: 12},
                2: {Sí: 86, No: 14},
                3: {Sí: 89, No: 11},
                4: {Sí: 91, No: 9},
                5: {Sí: 90, No: 10},
                6: {Sí: 87, No: 13},
                7: {Sí: 88, No: 12},
                8: {Sí: 92, No: 8},
                9: {Sí: 89, No: 11}
            }
        }, comments: ["Muy dedicada.", "Explica bien los experimentos."]}
    ],
    "Por Horas": [
        {name: "Carlos Sánchez", photo: "assets/img/user.png", subjects: ["Artes"], evaluations: {
            "Artes": {
                "Total de alumnos": 15,
                1: {Sí: 90, No: 10},
                2: {Sí: 88, No: 12},
                3: {Sí: 87, No: 13},
                4: {Sí: 91, No: 9},
                5: {Sí: 89, No: 11},
                6: {Sí: 86, No: 14},
                7: {Sí: 88, No: 12},
                8: {Sí: 90, No: 10},
                9: {Sí: 87, No: 13}
            }
        }, comments: ["Creativo y motivador.", "Clases muy dinámicas."]}
    ],
    "Servicios": [
        {name: "Disciplina", photo: "assets/img/disciplina.png", subjects: ["Disciplina"], evaluations: {
            "Disciplina": {
                "Total de alumnos": 246,
                1: {Sí: 95.93, No: 4.07},
                2: {Sí: 97.15, No: 2.85},
                3: {Sí: 92.68, No: 7.32},
                4: {Sí: 91.87, No: 8.13},
                5: {Sí: 96.34, No: 3.66},
                6: {Sí: 91.46, No: 8.54}
            }
        }, comments: [
            "A lo mejor podrían tomar en cuenta ser más flexibles y usar criterio para ciertas cosas de disciplina",
            "La disciplina es buena, no necesita cambios"
        ]},
        {name: "Paramédico", photo: "assets/img/paramedico.png", subjects: ["Paramédico"], evaluations: {
            "Paramédico": {
                "Total de alumnos": 246,
                1: {Sí: 76.83, No: 23.17},
                2: {Sí: 73.98, No: 26.02},
                3: {Sí: 87.80, No: 12.20},
                4: {Sí: 76.02, No: 23.98}
            }
        }, comments: []},
        {name: "Transporte", photo: "assets/img/transporte.png", subjects: ["Transporte"], evaluations: {
            "Transporte": {
                "Total de alumnos": 52,
                1: {Sí: 88.46, No: 11.54},
                2: {Sí: 96.15, No: 3.85},
                3: {Sí: 88.46, No: 11.54},
                4: {Sí: 84.62, No: 15.38},
                5: {Sí: 86.54, No: 13.46}
            }
        }, comments: []},
        {name: "Psicopedagógico", photo: "assets/img/psicopedagogico.png", subjects: ["Psicopedagógico"], evaluations: {
            "Psicopedagógico": {
                "Total de alumnos": 246,
                1: {Sí: 88.21, No: 11.79},
                2: {Sí: 81.30, No: 18.70},
                3: {Sí: 94.31, No: 5.69},
                4: {Sí: 86.99, No: 13.01},
                5: {Sí: 86.99, No: 13.01}
            }
        }, comments: []},
        {name: "La Loma", photo: "assets/img/user.png", subjects: ["La Loma"], evaluations: {
            "La Loma": {
                "Total de alumnos": 246,
                1: {Sí: 91.46, No: 8.54},
                2: {Sí: 91.46, No: 8.54},
                3: {Sí: 90.24, No: 9.76},
                4: {Sí: 90.65, No: 9.35}
            }
        }, comments: [
            "Salimos muy tarde de taekwondo",
            "En tennis",
            "Tenis, los profes no hace nada más que darnos pelotas y una cancha, muy pocas veces nos an dado clase de verdad",
            "En tocho, todo está bien, no cambien al coach. Por favor.",
            "En fútbol es mejor usar la cancha de 11 porque somos muchos",
            "En futbol deberíamos de usar más la cancha de 11",
            "En futbol hay que usar mas veces las canchas de 11 por que somos muchos",
            "Basket, debería estar techada",
            "Tenis, no hacen nada",
            "Tochito",
            "en yoga a veces salimos tarde",
            "Tenis porque cuando yo estaba no te enseñaban nada.",
            "Que agreguen de nuevo crossfit",
            "Ya corran al profe de fut",
            "Tennis",
            "En ritmos",
            "Telas porque el profe es muy creido y a veces grosero",
            "Yoga, más taletes",
            "Yoga más tapetes",
            "Yoga más tapetes",
            "Me parece que todas tienen un buen nivel para entrenar",
            "Box, regrésenos a Jossie",
            "Yo considero que la distribución de disciplinas está un poco mal, pues los martes y jueves no hay clases nobles con el cuerpo",
            "Que tenis sea como el año pasado q había clases y el profe te enseñaba",
            "Tenis, se hacen bien mensos toda la clase.",
            "A las que voy todo bien",
            "En tenis no se hace nada",
            "en volley porque es muy dinámico",
            "Fútbol ir en una hora menos soleada",
            "Box",
            "No hay práctica de tenis para mejorar.",
            "En yoga, porque luego no hay tapetes suficientes",
            "Pádel, por qué no están al pendiente de nosotros",
            "En la loma (basquet) no hay suficiente material para todos",
            "Fut porque el coach no muestra interés. Y tocho porque el coach pues simplemente no.",
            "en yoga poner más tapetes",
            "Pádel",
            "Considera que en la loma para pádel se establezcan horas horarios para nosotros en los que las canchas no se estén usando",
            "futbol ya que van muchas personas q no están el la lista y se vuelve aburrido",
            "más entrenamiento en tocho",
            "En tenis, el profe nunca está presente",
            "En poner mallas a varias canchas, por el sol",
            "No nos ponemos atención en voleibol",
            "Fútbol ( despidan a jhonatan)",
            "Diría que en tocho muchos no hacen nada",
            "tocho, porque hacemos lo mismos todos los días y a veces no hacemos nada",
            "Box regresando al antiguo profesor SOLO los lunes y miércoles",
            "Basquetbol, porque no tiene un interés genuino en ello",
            "tochito porque siempre hacemos lo mismo",
            "En fut debería estar techado",
            "Fútbol Jonatan Becerra es mediocre, grosero, naco, y parece que se liga a las niñas todo el tiempo en lugar de dar clases. Se pelea con los alumnos por cualquier cosa. Honestamente deberían de despedirlo y tener a alguien mucho más atento de las actitudes de los profes de La Loma, creo que ya es bien sabido lo que pasó con Gabo, y Jona no es la excepción.",
            "solo estoy en tocho y esta bien",
            "Futbol, a veces son muchos",
            "Pienso que deben poner más días de Taekwondo, ya que es una disciplina que requiere varios días de entrenamiento para poder ver avances. El coach es muy bueno y pone actividades de acuerdo al avance de cada alumno, sin embargo, requiere más días de clase para poder avanzar.",
            "danza aerea, es aburrido",
            "Tennis",
            "en ritmos porque me gustaría que pusieran nuevas coreografías y canciones ya que siempre son las mismas",
            "En tennis no se hace nada",
            "Pádel y tenis como tal lo hacen nda más que pelotear",
            "En pádel, porque los profesores nunca dan clases, se van a la cafetería de la loma, no hay toman lista, a veces ni están, su actitud es nefasta",
            "En tenis más coordinación y atención",
            "En pádel que nos den una buena clase",
            "padel, los profesores no saben dar clase, y ni siquiera te dirigen la palabra, como si tuvieran pena de hablarnos",
            "Basquetball, no le dan la importancia a un deporte tan importante",
            "Pádel porque los profes echan flojera y siempre hacemos lo mismo cuando si hay clase y es bien poquito y además no corrigen la técnica para enseñarnos como se hace",
            "Tenis",
            "Fútbol, el entrenador no muestra ningún tipo de interés por la clase o sus alumnos, ha llegado a faltarle al respeto a mis compañeros y ha dejado claro que a él no le interesa que el taller siga llegando a decir “por mi que cierren el taller”",
            "Futbol porque el profesor no muestra ningún tipo de interés y ah llegado a soltar frases como por mí que cierren el taller a mí no me importa",
            "🎾 tenis, hacer mas actividades",
            "El calor de la cancha de caucho",
            "Ritmos latinos, quítenlo y pongan telas otra vez",
            "Futbol Soccer, no muestra interes y es muy repetitivo todo",
            "dar tiempo para que los de natación puedan regresar",
            "las clases de box acaban muy tarde y me regañan por llegar tarde, natación muy grosero el personal siempre hablando con tonos malhumorados, el de pádel no presta más de una pelota o de plano ninguna,",
            "Natación dar más tiempo para cambiarse y en tenis asegurarse de pasar bien asistencia",
            "Deberían agregar más o tetes en la de basketball",
            "Tenis mejores activades",
            "Que si den clases en tenis, que no dan claes",
            "Tenis, la clase es inexistente"
        ]},
        {name: "Cafetería", photo: "assets/img/cafeteria.jpg", subjects: ["Cafetería"], evaluations: {
            "Cafetería": {
                "Total de alumnos": 246,
                1: {Sí: 65.85, No: 34.15},
                2: {Sí: 86.18, No: 13.82},
                3: {Sí: 54.07, No: 45.93},
                4: {Sí: 69.51, No: 30.49}
            }
        }, comments: [
            "que quitaron la tienda",
            "Los boneless estan asquerosos y duros",
            "si, mi comida ha estado mala",
            "Me he encontrado pelos en la comida, los precios son muy altos, unas veces la comida está fría, se tardan mucho en preparar la comida.",
            "Necesitan abrir más puntos de venta, dividir los clientes, aunque vendan lo mismo, o diferentes cosas en cada uno. Las filas actualmente son interminables.",
            "Las aguas están horribles pero las embotelladas",
            "deberian agregar más cositas al menú",
            "Las filas que hay para comprar",
            "Solo que siempre hay mucha fila y tardas como 20 minutos del recreo esperando",
            "Cosas más saludable y baratas",
            "los boneless de la cafe duros",
            "Todo bien",
            "verían vender más cosas y de mejor calidad",
            "Mejorar la calidad de servicios",
            "la comida tiene mucha grasa",
            "Los boneless están bien feos y duros.",
            "Los precios son altos y está muy grasosa la comida",
            "Todo bien",
            "Que una vez me cobraron algo que yo no había comprado",
            "si, una vez me dieron mi comida un poco cruda",
            "Quitaron la coca cola y refrescos",
            "La fila",
            "No,",
            "no compro mucho, pero me han dicho que falta higiene.",
            "Quitaron cosas del semestre pasado como las hamburguesas o gusanos al pastor que eran lo mejor.",
            "es muy cara y no tienen tanta variedad",
            "se hace una fila enorme porque no hay un control, la gente se mete y por lo tanto se hace mucho tiempo",
            "Si ya que he dejado comida pagada y no aparece y no me querían reembolsar",
            "Siento que no hay tan buena variedad",
            "una vez aparte algo para la salida, lo pagué y cuando llegué para agarrar lo que pedí ya mi estaba y no me lo repusieron",
            "muy mala organización y muy grasosa la comida, y poca variedad",
            "se tardan mucho, la fila de las máquinas de sopas es muy tardado y nunca sirven las 2",
            "deberían abrir más food trucks",
            "la comida cae mal",
            "me parece que el menú a sido muy malo desde que quitaron lo dulce porfa regrésenlo",
            "Mis alimentos tienen muchísima grasa que hasta está goteando y una vez me salió un pelo en mi comida",
            "x",
            "una vez me salió un cabello en mi sushi, y a una amiga mía le pasó que su pan tenía hongo",
            "El servicio es muy bueno y las trabajadoras son personas muy lindas y agradables, espero sigan así pero mejoren su equipo y le agregen variedad al menú, además deberían de pegar un menu en la pared de la cafetería.",
            "cuando he comido sushi ha estado en mal estado, he encontrado pelos.",
            "en la cafetería a mi hermana le entregaron un baguette el cual traía un hongo en el pan.",
            "desde que dejaron a una sola organización a cargo de la cafetería la calidad ha disminuido muchísimo quitando ingredientes o de mala calidad como el pollo muy duro o arrachera fea y los precios han aumentado",
            "deberian haber mas variedad de cosas saludables",
            "Muy lento a veces",
            "si me enfermé del estómago por algún alimento echado a perder y me tuvieron que llevar al doctor",
            "bájenle el precio a sus baguettes no puede ser que pague casi 100 pesos por un baguette",
            "bájenle el precio a las cosas, luego no me da",
            "No he tenido pero me gustaría que añadieran más cosas saludables para desayuno y para snacks.",
            "me gustaría que vuelvan a vender papas, galletas, bebidas, dulces, etc",
            "Si quiero mas variedad de comida",
            "El aumento de los precios",
            "Está muy cara y luego tardan mucho y se entrega fria",
            "Regresen el azúcar, Claudia ni nos topa",
            "Se equivocan con los pedidos",
            "Si, sin el uso de celular y reducir la cantidad de alimentos que se venden, las filas son muy largas y tardan mucho, quitando más del 70% de tu horario de comida para esperar en la fila y se acaba la comida",
            "Los precios son altos y necesitan más variedad",
            "Regresen el pay de queso nunca lo logre probar",
            "que al afogato le pongan helado de vainilla por qué la fresa pues no le da buen sabor",
            "muchas veces he encontrado un cabello dentro de mi comida, especialmente en el sushi",
            "En una ocasión compré un baguette y el pan tenía hongos. Y otro día me salió un cabello en un sushi",
            "Que hayan quitado las frituras",
            "una carne un poquillo cruda",
            "tal vez que la gente se mete pero fuera de eso el servicio y la atencion es muy buena",
            "hay pocas opciones de comida"
        ]},
        {name: "Limpieza", photo: "assets/img/limpieza.png", subjects: ["Limpieza"], evaluations: {
            "Limpieza": {
                "Total de alumnos": 246,
                1: {Sí: 95.93, No: 4.07},
                2: {Sí: 96.75, No: 3.25},
                3: {Sí: 95.93, No: 4.07}
            }
        }, comments: [
            "Otro comentario que no es de disciplina pero en el área de limpieza no hay espacio para sugerencias, es que hay una señora en específico pelirroja que luego se comporta de forma grosera, de repente habla brusco y hace caras."
        ]},
        {name: "Talleres Extra Clase", photo: "assets/img/taller.png", subjects: ["Talleres Extra Clase"], evaluations: {
            "Talleres Extra Clase": {
                "Total de alumnos": 41,
                1: {Sí: 97.56, No: 2.44},
                2: {Sí: 100.00, No: 0.00},
                3: {Sí: 100.00, No: 0.00},
                4: {Sí: 100.00, No: 0.00},
                5: {Sí: 95.12, No: 4.88},
                6: {Sí: 95.12, No: 4.88}
            }
        }, comments: []},
        {name: "Ligas Deportivas", photo: "assets/img/ligas.png", subjects: ["Ligas Deportivas"], evaluations: {
            "Ligas Deportivas": {
                "Total de alumnos": 55,
                1: {Sí: 94.55, No: 5.45},
                2: {Sí: 87.27, No: 12.73},
                3: {Sí: 83.64, No: 16.36},
                4: {Sí: 92.73, No: 7.27},
                5: {Sí: 96.36, No: 3.64},
                6: {Sí: 87.27, No: 12.73}
            }
        }, comments: []}
    ]
};

let selectedRole = null;
let selectedPerson = null;

// Function to populate role list
function populateRoleList() {
    const roleList = document.getElementById('role-list');
    roleList.innerHTML = '';
    Object.keys(roles).forEach(role => {
        if (role === "Servicios") {
            const roleLabel = document.createElement('label');
            roleLabel.className = 'role';
            roleLabel.onclick = () => toggleSubRoles('servicios-sub-roles');
            roleLabel.innerHTML = `${role} <i class="fas fa-chevron-down"></i>`;
            roleList.appendChild(roleLabel);
            const subRolesDiv = document.createElement('div');
            subRolesDiv.className = 'sub-roles';
            subRolesDiv.id = 'servicios-sub-roles';
            roles[role].forEach(service => {
                const subRoleLabel = document.createElement('label');
                subRoleLabel.className = 'sub-role';
                subRoleLabel.onclick = () => showRoleInfo('Servicios', service.name);
                subRoleLabel.innerText = service.name;
                subRolesDiv.appendChild(subRoleLabel);
            });
            roleList.appendChild(subRolesDiv);
        } else {
            const roleLabel = document.createElement('label');
            roleLabel.className = 'role';
            roleLabel.onclick = () => showRoleInfo(role);
            roleLabel.innerText = role;
            roleList.appendChild(roleLabel);
        }
    });
}

// Function to toggle sub-roles
function toggleSubRoles(id) {
    const subRoles = document.getElementById(id);
    const icon = subRoles.previousElementSibling.querySelector('i');
    subRoles.classList.toggle('active');
    icon.classList.toggle('rotate');
}

// Function to show role information
function showRoleInfo(role, subRole = null) {
    const roleInfo = document.getElementById('roleInfo');
    roleInfo.innerHTML = '';
    selectedRole = role;

    let people = roles[role];
    if (subRole) {
        people = roles[role].filter(person => person.name === subRole);
    }

    if (people.length > 0) {
        people.forEach(person => {
            const card = document.createElement('div');
            card.className = 'card';
            const showSubjectButton = role !== 'Servicios';
            card.innerHTML = `
                <img src="${person.photo}" alt="${person.name}">
                <h3>${person.name}</h3>
                <div class="btn-container">
                    <button class="btn btn-general" onclick="showGeneralResults('${role}', '${person.name}')">Resultados Generales</button>
                    ${showSubjectButton ? `<button class="btn btn-materia" onclick="showSubjectResults('${role}', '${person.name}')">Resultados por Materia</button>` : ''}
                    <button class="btn btn-comentarios" onclick="showComments('${role}', '${person.name}')">Comentarios</button>
                </div>
            `;
            roleInfo.appendChild(card);
        });
        document.getElementById('noSelectionMessage').style.display = 'none';
        roleInfo.classList.add('active');
    } else {
        document.getElementById('noSelectionMessage').style.display = 'block';
        roleInfo.classList.remove('active');
    }
}

// Function to show general results
function showGeneralResults(role, name) {
    const person = roles[role].find(p => p.name === name);
    selectedPerson = person;

    let averages = { Sí: 0, No: 0 };
    person.subjects.forEach(subject => {
        let avgSí = 0, avgNo = 0;
        const evalLength = Object.keys(person.evaluations[subject]).length - 1;
        for (let i = 1; i <= evalLength; i++) {
            avgSí += person.evaluations[subject][i].Sí;
            avgNo += person.evaluations[subject][i].No;
        }
        avgSí /= evalLength;
        avgNo /= evalLength;
        averages.Sí += avgSí;
        averages.No += avgNo;
    });
    averages.Sí /= person.subjects.length;
    averages.No /= person.subjects.length;

    let html = `
        <h2>PREPA BALMORAL ESCOCÉS</h2>
        <h3>CONCENTRADO EVALUACIÓN ${role === 'Servicios' ? 'DE SERVICIOS' : 'DOCENTE'}</h3>
        <h4>${role === 'Servicios' ? 'SERVICIO' : 'NOMBRE DEL DOCENTE'}: ${name}</h4>
        <table>
            <thead>
                <tr>
                    <th rowspan="2">No.</th>
                    <th rowspan="2">CRITERIO DE EVALUACIÓN</th>
                    ${person.subjects.map(subject => `<th colspan="2">${subject}</th>`).join('')}
                    <th rowspan="2">PROMEDIO</th>
                </tr>
                <tr>
                    ${person.subjects.map(subject => `<th>% de Sí</th><th>% de No</th>`).join('')}
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td></td>
                    <td>Total de alumnos</td>
                    ${person.subjects.map(subject => `<td colspan="2">${person.evaluations[subject]["Total de alumnos"]}</td>`).join('')}
                    <td></td>
                </tr>
    `;

    const criteriaMap = {
        "default": [
            "El docente dio a conocer los criterios de evaluación de la materia",
            "¿El docente explica los temas de manera clara y comprensible?",
            "¿El docente fomenta la participación de los alumnos y responde a sus preguntas de manera adecuada?",
            "El docente se comunica de manera respetuosa y clara.",
            "¿El docente muestra dominio del tema que enseña?",
            "¿El docente utiliza recursos o estrategias que facilitan el aprendizaje (por ejemplo, presentaciones, ejercicios prácticos, ejemplos, etc.)?",
            "¿El docente crea un ambiente de respeto y motivación en clase?",
            "El docente evalúa de acuerdo con los contenidos vistos en clase y criterios establecidos",
            "El docente da retroalimentación oportuna para garantizar el aprendizaje"
        ],
        "Disciplina": [
            "¿EL ENCARGADO DE DISCIPLINA APLICA EL REGLAMENTO DE LOS BALMOREES EN TODO MOMENTO?",
            "¿EL ENCARGADO DE DISCIPLINA TRATA CON RESPETO A TODOS LOS ALUMNOS?",
            "¿EL ENCARGADO DE DISCIPLINA TIENE UN BUEN CONTROL ESTUDIANTIL DE TAL MANERA QUE GENERA UN AMBIENTE DE SEGURIDAD Y RESPETO?",
            "¿EL ENCARGADO DE DISCIPLINA APLICA EFICIENTEMENTE LA METODOLOGÍA DE WARNING Y RECÓRD?",
            "¿EL ENCARGADO DE DISCIPLINA REALIZA SEGUIMIENTOS, RONDINES Y GUARDIAS EFICIENTES DURANTE LA JORNADA?",
            "¿ESTOY SATISFECHO POR EL TRABAJO, GESTIÓN Y MANEJO DEL ÁREA DE DISCIPLINA?"
        ],
        "Paramédico": [
            "¿EL PARAMEDICO SE ENCUENTRA DISPONIBLE PARA ATENDER CUALQUIER EVENTUALIDAD QUE SE PRESENTE?",
            "¿LA ATENCIÓN Y RESPUESTA DEL SERVICIO MÉDICO ES RÁPIDA Y EFECTIVA EN SITUACIONES DE EMERGENCIA?",
            "¿EL PARAMEDICO TRATA CON RESPETO A TODOS LOS ALUMNOS?",
            "¿ESTOY SATISFECHO CON ATENCIÓN Y CANALIZACIONES REALIZADAS POR EL PARAMEDICO?"
        ],
        "Transporte": [
            "¿EL SERVICIO DE TRANSPORTE ES PUNTUAL Y RESPETA LOS TIEMPOS PREVISTOS?",
            "¿EL PERSONAL MANTIENE UNA ACTITUD RESPETUOSA Y ADECUADA DURANTE LOS TRASLADOS?",
            "¿LAS UNIDADES ESTÁN EN CONDICIONES ADECUADAS Y LIMPIAS?",
            "¿EL SERVICIO DE COMUNICACIÓN CON LOS ALUMNOS Y PADRES DE FAMILIA ES ADECUADO?",
            "¿ESTOY SATISFECHO CON EL SERVICIO DE TRANSPORTE OFRECIDO?"
        ],
        "Psicopedagógico": [
            "¿EL PSICÓLOGO ESCOLAR MUESTRA INTERÉS GENUINO EN TUS INQUIETUDES Y TE BRINDA ATENCIÓN PROFESIONAL?",
            "¿ES ACCESIBLE, RÁPIDO Y EFICIENTE EL PROCESO PARA CONSEGUIR UNA CITA Y ATENCIÓN POR PARTDE DEL PSICÓLOGO ESCOLAR?",
            "¿EL PSICÓLOGO TE TRATA CON RESPETO?",
            "¿LAS SESIONES CON EL PSICÓLOGO HAN CONTRIBUIDO EFECTIVAMENTE A TU BIENESTAR Y DESARROLLO PERSONAL?",
            "¿ESTOY SATISFECHO POR EL TRABAJO, GESTIÓN Y MANEJO DEL ÁREA DE PSICOLOGÍA?"
        ],
        "La Loma": [
            "¿LAS CLASES DEPORTIVAS INICIAN Y FINALIZAN DE MANERA PUNTUAL?",
            "¿LOS ENTRENADORES MUESTRAN DOMINIO Y DISCIPLINA DEPORTIVA?",
            "¿LAS CLASES PROMUEVEN EL INTERÉS EN EL DEPORTE?",
            "ESTOY SATISFECHO POR EL TRABAJO, GESTIÓN Y MANEJO DEL ÁREA DE DISCIPLINA"
        ],
        "Cafetería": [
            "¿EL SABOR Y LA VARIEDAD DE LOS ALIMENTOS QUE OFRECEN SON DE MI AGRADO?",
            "¿LA LIMPIEZA EN LOS PRODUCTOS QUE OFRECEN ES LA ESPERADA?",
            "¿LOS COSTOS EN RELACIÓN A LA CALIDAD DE LOS ALIMIENTOS SON LOS ADECUADOS?",
            "¿ESTOY SATISFECHO CON EL SERVICIO OFRECIDO POR LA CAFETERÍA?"
        ],
        "Limpieza": [
            "¿LOS ESPACIOS CRÍTICOS (BAÑOS, SALONES, OFICINAS, AULA MAGNA, ETC.) SE MANTIENEN LIMPIOS DURANTE LA JORNADA?",
            "¿EL PERSONAL DE LIMPIEZA TRATA CON RESPETO A TODOS LOS ALUMNOS?",
            "¿ESTOY SATISFECHO CON EL SERVICIO DE LIMPIEZA?"
        ],
        "Talleres Extra Clase": [
            "¿EL CONTENIDO Y PREPARACIÓN DE LOS TALLERES ES EL ADECUADO?",
            "¿EL TITULAR DEL TALLER TRATA CON RESPETO A TODOS LOS ALUMNOS?",
            "¿EL TITULAR DEL TALLER APLICA EL REGLAMENTO DE LOS BALMORRES?",
            "¿EL TITULAR DEL TALLER TIENE UN BUEN CONTROL DEL GRUPO DE TAL MANERA QUE GENERA UN AMBIENTE DE SEGURIDAD Y RESPETO?",
            "¿MIS CONOCIMIENTOS Y HABILIDADES HAN MEJORADO A PARTIR DE QUE ASISTO AL TALLER?",
            "¿ESTOY SATISFECHO CON EL DESEMPEÑO, GUÍA, ACOMPAÑAMIENTO Y PREPARACIÓN RECIBIDA POR PARTE DEL TITULAR DEL TALLER?"
        ],
        "Ligas Deportivas": [
            "¿EL COACH RESPONSABLE DE LA LIGA APLICA EL REGLAMENTO DE LOS BALMOREES?",
            "¿EL COACH RESPONSABLE DE LA LIGA TRATA CON RESPETO A TODOS LOS ALUMNOS?",
            "¿EL COACH RESPONSABLE DE LA LIGA TIENE UN BUEN CONTROL DEL EQUIPO DE TAL MANERA QUE GENERA UN AMBIENTE DE SEGURIDAD Y RESPETO?",
            "¿EL COACH RESPONSABLE DE LA LIGA MUESTRA UN INTERÉS POR EL COMPORTAMIENTO DEL EQUIPO?",
            "¿EL COACH RESPONSABLE DE LA LIGA DEMUESTRA CONOCIMIENTO TÉCNICO Y CAPACIDAD PARA DESARROLLAR LAS HABILIDADES DE LOS INTEGRANTES DE LA LIGA?",
            "¿ESTOY SATISFECHO POR EL TRABAJO, GESTIÓN Y MANEJO DE LAS LIGAS REPRESENTATIVAS?"
        ]
    };

    const subject = person.subjects[0];
    const criteria = criteriaMap[subject] || criteriaMap["default"];
    const evalLength = Object.keys(person.evaluations[subject]).length - 1;

    for (let i = 1; i <= evalLength; i++) {
        let rowAverageSí = 0;
        let rowAverageNo = 0;
        html += `
            <tr>
                <td>${i}</td>
                <td>${criteria[i - 1]}</td>
        `;
        person.subjects.forEach(subject => {
            const evalData = person.evaluations[subject][i];
            html += `<td>${evalData.Sí.toFixed(2)}%</td><td>${evalData.No.toFixed(2)}%</td>`;
            rowAverageSí += evalData.Sí;
            rowAverageNo += evalData.No;
        });
        rowAverageSí /= person.subjects.length;
        rowAverageNo /= person.subjects.length;
        html += `<td>${rowAverageSí.toFixed(2)}%</td></tr>`;
    }

    html += `
                <tr>
                    <td colspan="2">PROMEDIO GENERAL DE SATISFACCIÓN</td>
                    ${person.subjects.map(subject => {
                        let avgSí = 0, avgNo = 0;
                        const evalLength = Object.keys(person.evaluations[subject]).length - 1;
                        for (let i = 1; i <= evalLength; i++) {
                            avgSí += person.evaluations[subject][i].Sí;
                            avgNo += person.evaluations[subject][i].No;
                        }
                        avgSí /= evalLength;
                        avgNo /= evalLength;
                        return `<td>${avgSí.toFixed(2)}%</td><td>${avgNo.toFixed(2)}%</td>`;
                    }).join('')}
                    <td>${averages.Sí.toFixed(2)}%</td>
                </tr>
            </tbody>
        </table>
    `;

    document.getElementById('generalResultsContent').innerHTML = html;
    const generalResultsModal = new bootstrap.Modal(document.getElementById('generalResultsModal'));
    generalResultsModal.show();
}

// Function to show subject results
function showSubjectResults(role, name) {
    const person = roles[role].find(p => p.name === name);
    selectedPerson = person;
    const select = document.getElementById('subjectSelect');
    select.innerHTML = '<option value="">Selecciona una materia</option>';
    person.subjects.forEach(subject => {
        const option = document.createElement('option');
        option.value = subject;
        option.textContent = subject;
        select.appendChild(option);
    });
    const subjectModal = new bootstrap.Modal(document.getElementById('subjectModal'));
    subjectModal.show();
    document.getElementById('subjectTable').innerHTML = '';
}

// Handle subject selection
document.getElementById('subjectSelect').addEventListener('change', function() {
    const subject = this.value;
    if (subject) {
        const person = roles[selectedRole].find(p => p.name === selectedPerson.name);
        const evalData = person.evaluations[subject];
        let html = `
            <h4>Resultados para ${subject}</h4>
            <table>
                <thead>
                    <tr>
                        <th>No.</th>
                        <th>CRITERIO DE EVALUACIÓN</th>
                        <th>% de Sí</th>
                        <th>% de No</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td></td>
                        <td>Total de alumnos</td>
                        <td colspan="2">${evalData["Total de alumnos"]}</td>
                    </tr>
        `;

        const criteria = [
            "El docente dio a conocer los criterios de evaluación de la materia",
            "¿El docente explica los temas de manera clara y comprensible?",
            "¿El docente fomenta la participación de los alumnos y responde a sus preguntas de manera adecuada?",
            "El docente se comunica de manera respetuosa y clara.",
            "¿El docente muestra dominio del tema que enseña?",
            "¿El docente utiliza recursos o estrategias que facilitan el aprendizaje (por ejemplo, presentaciones, ejercicios prácticos, ejemplos, etc.)?",
            "¿El docente crea un ambiente de respeto y motivación en clase?",
            "El docente evalúa de acuerdo con los contenidos vistos en clase y criterios establecidos",
            "El docente da retroalimentación oportuna para garantizar el aprendizaje"
        ];

        const evalLength = Object.keys(evalData).length - 1;
        for (let i = 1; i <= evalLength; i++) {
            const data = evalData[i];
            html += `
                <tr>
                    <td>${i}</td>
                    <td>${criteria[i - 1]}</td>
                    <td>${data.Sí.toFixed(2)}%</td>
                    <td>${data.No.toFixed(2)}%</td>
                </tr>
            `;
        }

        let avgSí = 0, avgNo = 0;
        for (let i = 1; i <= evalLength; i++) {
            avgSí += evalData[i].Sí;
            avgNo += evalData[i].No;
        }
        avgSí /= evalLength;
        avgNo /= evalLength;
        html += `
                    <tr>
                        <td colspan="2">PROMEDIO GENERAL DE SATISFACCIÓN</td>
                        <td>${avgSí.toFixed(2)}%</td>
                        <td>${avgNo.toFixed(2)}%</td>
                    </tr>
                </tbody>
            </table>
        `;
        document.getElementById('subjectTable').innerHTML = html;
    }
});

// Function to show comments
function showComments(role, name) {
    const person = roles[role].find(p => p.name === name);
    selectedPerson = person;
    let html = `
        <h2>Comentarios para ${name}</h2>
        <div class="comments-box">
            ${person.comments.length > 0 ? person.comments.map(comment => `<p>${comment}</p>`).join('') : '<p>No hay comentarios disponibles.</p>'}
        </div>
    `;
    document.getElementById('commentsContent').innerHTML = html;
    const commentsModal = new bootstrap.Modal(document.getElementById('commentsModal'));
    commentsModal.show();
}

// Function to load header
function loadHeader() {
    fetch('header.html')
        .then(response => response.text())
        .then(data => {
            document.getElementById('header').innerHTML = data;
        })
        .catch(error => console.error('Error loading header:', error));
}

// Initialize page
document.addEventListener('DOMContentLoaded', () => {
    loadHeader();
    populateRoleList();
    document.getElementById('noSelectionMessage').style.display = 'block';
    document.getElementById('roleInfo').classList.remove('active');
});